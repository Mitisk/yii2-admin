window.addEventListener("load",function(){$(".list-draggable").arrangeable({dragSelector:".drag-area"});const fbTemplate=document.getElementById("build-wrap");if(fbTemplate){var formBuilder=$(fbTemplate).formBuilder({i18n:{locale:"ru-RU",location:"/web/lang/"},formData:window.formData,actionButtons:[],allowStageSort:true,append:false,prepend:false,controlOrder:["text","textarea","select","checkbox-group","checkbox","date","file","hidden","number","header","paragraph","hrLine"],controlPosition:"right",dataType:"json",defaultFields:[],disabledActionButtons:["save","data","clear"],disabledAttrs:[],disabledFieldButtons:{hrLine:["edit"]},disabledSubtypes:{},disableFields:["autocomplete","button","radio-group"],disableHTMLLabels:false,disableInjectedStyle:false,editOnAdd:false,fields:[{label:"Разделитель",attrs:{type:"hrLine"},icon:" — "}],fieldRemoveWarn:false,fieldEditContainer:null,inputSets:[],notify:{error:console.error,success:console.log,warning:console.warn},persistDefaultFields:false,onAddField:function(editPanel){checkFields()},onAddOption:()=>null,onClearAll:function(editPanel){checkFields()},onCloseFieldEdit:function(editPanel){checkFields()},onOpenFieldEdit:()=>null,onSave:function(evt,formData){$("#adminmodel-data").val(formData)},replaceFields:[],roles:window.roles,scrollToFieldOnAdd:true,showActionButtons:true,sortableControls:false,stickyControls:{enable:true,offset:{top:5,bottom:"auto",right:"auto"}},subtypes:{},templates:{hrLine:function(fieldData){return{field:"<hr>"}}},typeUserAttrs:{text:{readonly:{label:"Readonly",value:false,type:"checkbox"}},number:{readonly:{label:"Readonly",value:false,type:"checkbox"}},"checkbox-group":{publicStaticMethod:{label:"Метод значений",options:window.publicStaticMethods},publicSaveMethod:{label:"Метод для сохранения",options:window.publicSaveMethods},readonly:{label:"Readonly",value:false,type:"checkbox"}},select:{publicStaticMethod:{label:"Метод значений",options:window.publicStaticMethods},publicSaveMethod:{label:"Метод для сохранения",options:window.publicSaveMethods},readonly:{label:"Readonly",value:false,type:"checkbox"}},date:{readonly:{label:"Readonly",value:false,type:"checkbox"}},file:{readonly:{label:"Readonly",value:false,type:"checkbox"}},textarea:{viewtype:{label:"Тип",options:{textarea:"Текстовое поле",visual:"Визуальный редактор",html:"HTML код"}},readonly:{label:"Readonly",value:false,type:"checkbox"}}},typeUserDisabledAttrs:{text:["value"],number:["value","subtype"],"checkbox-group":["toggle","inline","other"],date:["value","subtype","min","max","step"],file:["placeholder"],hrLine:["value"],textarea:["value","maxlength","rows","subtype"]},typeUserEvents:{},enableEnhancedBootstrapGrid:true})}function checkFields(){var fields=formBuilder.formData;if(fields!==false){$("#adminmodel-data").val(fields);if(fields.length>0){fields=JSON.parse(fields);$(".js-click-to-attr").removeAttr("checked").removeAttr("disabled");$.each(fields,function(i,item){if(item.name){$('.js-click-to-attr[data-name="'+item.name+'"]').attr("checked","checked").attr("disabled","disabled")}})}}}$(document).on("click",".js-click-to-attr",function(e){var field={type:$(this).data("type"),className:"form-control",name:$(this).data("name"),label:$(this).data("label"),required:$(this).data("required")};if(!$(this).attr("disabled")){formBuilder.actions.addField(field)}$(this).attr("disabled","disabled");checkFields()});$(document).on("click",".js-list-actions",function(e){$(this).toggleClass("active");$(this).find("input").val($(this).find("input").val()==1?0:1)});$(document).on("click",".js-check-to-save",function(e){e.preventDefault();checkFields();$(this).closest("form").submit()})});