(function(){function resolveMode(vt){if(!vt)return"text";vt=String(vt).toLowerCase();switch(vt){case"html":return"html";case"css":return"css";case"js":case"javascript":return"javascript";case"ts":case"typescript":return"typescript";case"php":return"php";case"json":return"json";case"sql":return"sql";case"markdown":case"md":return"markdown";case"xml":return"xml";case"yaml":case"yml":return"yaml";default:return"text"}}var textareas=document.querySelectorAll("textarea[id][data-ace-mode], textarea[id]");textareas.forEach(function(ta){if(ta.dataset.aceInited==="1")return;var vt=ta.getAttribute("data-ace-mode");var taId=ta.id;var hostId=taId+"__ace";var host=document.getElementById(hostId);if(!host)return;var initial=ta.value;ta.style.display="none";var editor=ace.edit(hostId);editor.setTheme("ace/theme/github");var mode=resolveMode(vt);editor.session.setMode("ace/mode/"+mode);editor.setOptions({fontSize:"13px",showPrintMargin:false,tabSize:2,useSoftTabs:true,wrap:true,maxLines:Infinity,minLines:Math.max(8,parseInt(ta.getAttribute("rows")||"10",10)),enableBasicAutocompletion:true,enableSnippets:true,enableLiveAutocompletion:false,autoScrollEditorIntoView:true});var readOnly=ta.hasAttribute("readonly")&&ta.getAttribute("readonly")!=="false";editor.setReadOnly(!!readOnly);editor.session.setValue(initial);var sync=function(){ta.value=editor.session.getValue()};editor.session.on("change",sync);var form=ta.closest("form");if(form){form.addEventListener("submit",sync)}var resizeObserver;if("ResizeObserver"in window){resizeObserver=new ResizeObserver(function(){editor.resize()});resizeObserver.observe(host)}window.addEventListener("resize",function(){editor.resize()});ta.dataset.aceInited="1";ta._aceEditor=editor})})();