import{iterate}from"./utils.js";export const getDom=query=>{if(query.jquery){return query[0]}if(query instanceof HTMLElement){return query}if(isHtmlString(query)){var tpl=document.createElement("template");tpl.innerHTML=query.trim();return tpl.content.firstChild}return document.querySelector(query)};export const isHtmlString=arg=>{if(typeof arg==="string"&&arg.indexOf("<")>-1){return true}return false};export const escapeQuery=query=>{return query.replace(/['"\\]/g,"\\$&")};export const triggerEvent=(dom_el,event_name)=>{var event=document.createEvent("HTMLEvents");event.initEvent(event_name,true,false);dom_el.dispatchEvent(event)};export const applyCSS=(dom_el,css)=>{Object.assign(dom_el.style,css)};export const addClasses=(elmts,...classes)=>{var norm_classes=classesArray(classes);elmts=castAsArray(elmts);elmts.map(el=>{norm_classes.map(cls=>{el.classList.add(cls)})})};export const removeClasses=(elmts,...classes)=>{var norm_classes=classesArray(classes);elmts=castAsArray(elmts);elmts.map(el=>{norm_classes.map(cls=>{el.classList.remove(cls)})})};export const classesArray=args=>{var classes=[];iterate(args,_classes=>{if(typeof _classes==="string"){_classes=_classes.trim().split(/[\t\n\f\r\s]/)}if(Array.isArray(_classes)){classes=classes.concat(_classes)}});return classes.filter(Boolean)};export const castAsArray=arg=>{if(!Array.isArray(arg)){arg=[arg]}return arg};export const parentMatch=(target,selector,wrapper)=>{if(wrapper&&!wrapper.contains(target)){return}while(target&&target.matches){if(target.matches(selector)){return target}target=target.parentNode}};export const getTail=(list,direction=0)=>{if(direction>0){return list[list.length-1]}return list[0]};export const isEmptyObject=obj=>{return Object.keys(obj).length===0};export const nodeIndex=(el,amongst)=>{if(!el)return-1;amongst=amongst||el.nodeName;var i=0;while(el=el.previousElementSibling){if(el.matches(amongst)){i++}}return i};export const setAttr=(el,attrs)=>{iterate(attrs,(val,attr)=>{if(val==null){el.removeAttribute(attr)}else{el.setAttribute(attr,""+val)}})};export const replaceNode=(existing,replacement)=>{if(existing.parentNode)existing.parentNode.replaceChild(replacement,existing)};