"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=default_1;const constants=require("../../constants.js");const vanilla_ts_1=require("../../vanilla.js");const utils_ts_1=require("../../utils.js");function default_1(){const self=this;self.settings.shouldOpen=true;self.hook("before","setup",()=>{self.focus_node=self.control;(0,vanilla_ts_1.addClasses)(self.control_input,"dropdown-input");const div=(0,vanilla_ts_1.getDom)('<div class="dropdown-input-wrap">');div.append(self.control_input);self.dropdown.insertBefore(div,self.dropdown.firstChild);const placeholder=(0,vanilla_ts_1.getDom)('<input class="items-placeholder" tabindex="-1" />');placeholder.placeholder=self.settings.placeholder||"";self.control.append(placeholder)});self.on("initialize",()=>{self.control_input.addEventListener("keydown",evt=>{switch(evt.keyCode){case constants.KEY_ESC:if(self.isOpen){(0,utils_ts_1.preventDefault)(evt,true);self.close()}self.clearActiveItems();return;case constants.KEY_TAB:self.focus_node.tabIndex=-1;break}return self.onKeyDown.call(self,evt)});self.on("blur",()=>{self.focus_node.tabIndex=self.isDisabled?-1:self.tabIndex});self.on("dropdown_open",()=>{self.control_input.focus()});const orig_onBlur=self.onBlur;self.hook("instead","onBlur",evt=>{if(evt&&evt.relatedTarget==self.control_input)return;return orig_onBlur.call(self)});(0,utils_ts_1.addEvent)(self.control_input,"blur",()=>self.onBlur());self.hook("before","close",()=>{if(!self.isOpen)return;self.focus_node.focus({preventScroll:true})})})}