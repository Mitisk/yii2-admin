"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=default_1;const vanilla_ts_1=require("../../vanilla.js");function default_1(){var self=this;self.hook("instead","setCaret",new_pos=>{if(self.settings.mode==="single"||!self.control.contains(self.control_input)){new_pos=self.items.length}else{new_pos=Math.max(0,Math.min(self.items.length,new_pos));if(new_pos!=self.caretPos&&!self.isPending){self.controlChildren().forEach((child,j)=>{if(j<new_pos){self.control_input.insertAdjacentElement("beforebegin",child)}else{self.control.appendChild(child)}})}}self.caretPos=new_pos});self.hook("instead","moveCaret",direction=>{if(!self.isFocused)return;const last_active=self.getLastActive(direction);if(last_active){const idx=(0,vanilla_ts_1.nodeIndex)(last_active);self.setCaret(direction>0?idx+1:idx);self.setActiveItem();(0,vanilla_ts_1.removeClasses)(last_active,"last-active")}else{self.setCaret(self.caretPos+direction)}})}