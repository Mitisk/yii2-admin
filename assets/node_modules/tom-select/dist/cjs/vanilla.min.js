"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.replaceNode=exports.setAttr=exports.nodeIndex=exports.isEmptyObject=exports.getTail=exports.parentMatch=exports.castAsArray=exports.classesArray=exports.removeClasses=exports.addClasses=exports.applyCSS=exports.triggerEvent=exports.escapeQuery=exports.isHtmlString=exports.getDom=void 0;const utils_ts_1=require("./utils.js");const getDom=query=>{if(query.jquery){return query[0]}if(query instanceof HTMLElement){return query}if((0,exports.isHtmlString)(query)){var tpl=document.createElement("template");tpl.innerHTML=query.trim();return tpl.content.firstChild}return document.querySelector(query)};exports.getDom=getDom;const isHtmlString=arg=>{if(typeof arg==="string"&&arg.indexOf("<")>-1){return true}return false};exports.isHtmlString=isHtmlString;const escapeQuery=query=>{return query.replace(/['"\\]/g,"\\$&")};exports.escapeQuery=escapeQuery;const triggerEvent=(dom_el,event_name)=>{var event=document.createEvent("HTMLEvents");event.initEvent(event_name,true,false);dom_el.dispatchEvent(event)};exports.triggerEvent=triggerEvent;const applyCSS=(dom_el,css)=>{Object.assign(dom_el.style,css)};exports.applyCSS=applyCSS;const addClasses=(elmts,...classes)=>{var norm_classes=(0,exports.classesArray)(classes);elmts=(0,exports.castAsArray)(elmts);elmts.map(el=>{norm_classes.map(cls=>{el.classList.add(cls)})})};exports.addClasses=addClasses;const removeClasses=(elmts,...classes)=>{var norm_classes=(0,exports.classesArray)(classes);elmts=(0,exports.castAsArray)(elmts);elmts.map(el=>{norm_classes.map(cls=>{el.classList.remove(cls)})})};exports.removeClasses=removeClasses;const classesArray=args=>{var classes=[];(0,utils_ts_1.iterate)(args,_classes=>{if(typeof _classes==="string"){_classes=_classes.trim().split(/[\t\n\f\r\s]/)}if(Array.isArray(_classes)){classes=classes.concat(_classes)}});return classes.filter(Boolean)};exports.classesArray=classesArray;const castAsArray=arg=>{if(!Array.isArray(arg)){arg=[arg]}return arg};exports.castAsArray=castAsArray;const parentMatch=(target,selector,wrapper)=>{if(wrapper&&!wrapper.contains(target)){return}while(target&&target.matches){if(target.matches(selector)){return target}target=target.parentNode}};exports.parentMatch=parentMatch;const getTail=(list,direction=0)=>{if(direction>0){return list[list.length-1]}return list[0]};exports.getTail=getTail;const isEmptyObject=obj=>{return Object.keys(obj).length===0};exports.isEmptyObject=isEmptyObject;const nodeIndex=(el,amongst)=>{if(!el)return-1;amongst=amongst||el.nodeName;var i=0;while(el=el.previousElementSibling){if(el.matches(amongst)){i++}}return i};exports.nodeIndex=nodeIndex;const setAttr=(el,attrs)=>{(0,utils_ts_1.iterate)(attrs,(val,attr)=>{if(val==null){el.removeAttribute(attr)}else{el.setAttribute(attr,""+val)}})};exports.setAttr=setAttr;const replaceNode=(existing,replacement)=>{if(existing.parentNode)existing.parentNode.replaceChild(replacement,existing)};exports.replaceNode=replaceNode;