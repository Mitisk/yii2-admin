(function($){"use strict";var defaultOptions={enabled:true,endpoint:"https://noembed.com/embed?nowrap=on"};$.extend(true,$.trumbowyg,{plugins:{pasteEmbed:{init:function(trumbowyg){trumbowyg.o.plugins.pasteEmbed=$.extend(true,{},defaultOptions,trumbowyg.o.plugins.pasteEmbed||{});if(Array.isArray(trumbowyg.o.plugins.pasteEmbed.endpoints)){trumbowyg.o.plugins.pasteEmbed.endpoint=trumbowyg.o.plugins.pasteEmbed.endpoints[0]}if(!trumbowyg.o.plugins.pasteEmbed.enabled){return}trumbowyg.pasteHandlers.push(function(pasteEvent){try{var clipboardData=(pasteEvent.originalEvent||pasteEvent).clipboardData,pastedData=clipboardData.getData("Text"),endpoint=trumbowyg.o.plugins.pasteEmbed.endpoint;if(!pastedData.startsWith("http")){return}pasteEvent.stopPropagation();pasteEvent.preventDefault();var requestUrl=new URL(endpoint);requestUrl.searchParams.append("url",pastedData.trim());fetch(requestUrl,{method:"GET",cache:"no-cache",signal:AbortSignal.timeout(2e3)}).then(response=>{return response.json().then(json=>{return json.html})}).catch(()=>{return undefined}).then(content=>{if(content===undefined){content=$("<a>",{href:pastedData,text:pastedData})[0].outerHTML}trumbowyg.execCmd("insertHTML",content)})}catch(c){}})}}}})})(jQuery);