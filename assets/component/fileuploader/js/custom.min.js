$(document).ready(function(){let fileUploaderCounter=1;var commonOptions={extensions:null,captions:"ru",changeInput:" ",theme:"thumbnails",enableApi:true,removeConfirmation:false,thumbnails:{box:'<div class="fileuploader-items">'+'<ul class="fileuploader-items-list">'+'<li class="fileuploader-thumbnails-input"><div class="fileuploader-thumbnails-input-inner"><i>+</i></div></li>'+"</ul>"+"</div>",item:'<li class="fileuploader-item">'+'<div class="fileuploader-item-inner">'+'<div class="type-holder">${extension}</div>'+'<div class="actions-holder">'+'<button type="button" class="fileuploader-action fileuploader-action-remove" title="${captions.remove}"><i class="fileuploader-icon-remove"></i></button>'+"</div>"+'<div class="thumbnail-holder">'+"${image}"+'<span class="fileuploader-action-popup"></span>'+"</div>"+'<div class="content-holder"><h5 title="${name}">${name}</h5>'+'<input type="hidden" class="js-temp-name" name="FileUploader[temp][${data.field_name}][${data.file_id}][id]" value="${data.file_id}">'+'<input type="text" class="alt-fileuploader-input js-temp-alt-name" name="FileUploader[temp][${data.field_name}][${data.file_id}][alt]" value="${data.alt}" maxlength="225" placeholder="Alt" autocomplete="off">'+"<span>${size2}</span></div>"+'<div class="progress-holder">${progressBar}</div>'+"</div>"+"</li>",item2:'<li class="fileuploader-item">'+'<div class="fileuploader-item-inner">'+'<div class="type-holder">${extension}</div>'+'<div class="actions-holder">'+'<a href="${file}" class="fileuploader-action fileuploader-action-download" title="${captions.download}" download><i class="fileuploader-icon-download"></i></a>'+'<button type="button" class="fileuploader-action fileuploader-action-remove" title="${captions.remove}"><i class="fileuploader-icon-remove"></i></button>'+"</div>"+'<div class="thumbnail-holder">'+"${image}"+'<span class="fileuploader-action-popup"></span>'+"</div>"+'<div class="content-holder"><h5 title="${name}">${name}</h5>'+'<input type="hidden" name="FileUploader[${data.field_name}][${data.file_id}][id]" value="${data.file_id}">'+'<input type="text" class="alt-fileuploader-input" name="FileUploader[${data.field_name}][${data.file_id}][alt]" value="${data.alt}" maxlength="225" placeholder="Alt" autocomplete="off">'+"<span>${size2}</span></div>"+'<div class="progress-holder">${progressBar}</div>'+"</div>"+"</li>",startImageRenderer:true,canvasImage:false,_selectors:{list:".fileuploader-items-list",item:".fileuploader-item",start:".fileuploader-action-start",retry:".fileuploader-action-retry",remove:".fileuploader-action-remove"},onItemShow:function(item,listEl,parentEl,newInputEl,inputEl){var plusInput=listEl.find(".fileuploader-thumbnails-input"),api=$.fileuploader.getInstance(inputEl.get(0));plusInput.insertAfter(item.html)[api.getOptions().limit&&api.getChoosedFiles().length>=api.getOptions().limit?"hide":"show"]();if(item.format=="image"){item.html.find(".fileuploader-item-icon").hide()}var withoutAlt=$(inputEl).hasClass("fileuploader-without-alt");if(withoutAlt){item.html.find(".alt-fileuploader-input, .js-temp-alt-name").remove()}if(!item.data.field_name){const nameAttribute=extractFieldName(inputEl.attr("name"));const tempNameInput=item.html.find(".js-temp-name");const tempAltNameInput=item.html.find(".js-temp-alt-name");function updateInputName(input,newNameTemplate,counter){if(input.length){const newName=newNameTemplate.replace("[]",`[${counter}]`);input.attr("name",newName)}}updateInputName(tempNameInput,`FileUploader[temp][${nameAttribute}][][id]`,fileUploaderCounter);if(!withoutAlt){updateInputName(tempAltNameInput,`FileUploader[temp][${nameAttribute}][][alt]`,fileUploaderCounter)}fileUploaderCounter++}},onItemRemove:function(html,listEl,parentEl,newInputEl,inputEl){var plusInput=listEl.find(".fileuploader-thumbnails-input"),api=$.fileuploader.getInstance(inputEl.get(0));html.children().animate({opacity:0},200,function(){html.remove();if(api.getOptions().limit&&api.getChoosedFiles().length-1<api.getOptions().limit)plusInput.show()})}},dragDrop:{container:".fileuploader-thumbnails-input"},afterRender:function(listEl,parentEl,newInputEl,inputEl){var plusInput=listEl.find(".fileuploader-thumbnails-input"),api=$.fileuploader.getInstance(inputEl.get(0));plusInput.on("click",function(){api.open()});api.getOptions().dragDrop.container=plusInput}};function extractFieldName(name){const match=name.match(/\[(.*?)\]/);return match?match[1]:null}$(".fileuploader-multiple").fileuploader($.extend({},commonOptions,{addMore:true,limit:12}));$(".fileuploader-single").fileuploader($.extend({},commonOptions,{addMore:false,limit:1}))});